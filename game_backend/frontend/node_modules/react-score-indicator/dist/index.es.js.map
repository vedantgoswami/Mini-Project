{"version":3,"file":"index.es.js","sources":["../src/utils/hex2rgba.js","../node_modules/style-inject/dist/style-inject.es.js","../src/components/Range.js","../src/components/Score.js","../src/index.js"],"sourcesContent":["export default function hex2rgba (hex, opacity = 1) {\n  const newhex = hex.replace('#', '');\n  const r = parseInt(newhex.substring(0, 2), 16);\n  const g = parseInt(newhex.substring(2, 4), 16);\n  const b = parseInt(newhex.substring(4, 6), 16);\n\n  const result = `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n  return result;\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport hex2rgba from '../utils/hex2rgba';\nimport styles from '../styles.css';\n\nexport default class Score extends React.Component {\n  static propTypes = {\n    scoreNumber: PropTypes.number.isRequired,\n    width: PropTypes.number,\n    lineWidth: PropTypes.number,\n    lineGap: PropTypes.number,\n    maxAngle: PropTypes.number,\n    rotation: PropTypes.number,\n    stepsColors: PropTypes.array.isRequired,\n    fadedOpacity: PropTypes.number,\n  };\n\n  static defaultProps = {\n    width: 200,\n    lineWidth: 5,\n    lineGap: 5,\n    maxAngle: 260,\n    rotation: 90,\n    fadedOpacity: 40,\n  };\n\n  constructor() {\n    super();\n    this.canvas = React.createRef();\n    this.ctx = null;\n    this.devicePixelRatio = null;\n  }\n\n  draw(ctx) {\n    if (!ctx || !this.devicePixelRatio) return;\n    const {\n      width,\n      maxAngle,\n      rotation,\n      stepsColors,\n      lineGap,\n      lineWidth,\n      scoreNumber,\n      fadedOpacity,\n    } = this.props;\n\n    // change size canvas when HDPI screen\n    const pixelRatio = this.devicePixelRatio;\n    const wRatio = width * pixelRatio;\n    this.canvas.current.width = wRatio;\n    this.canvas.current.height = wRatio;\n\n    const halfWidth = wRatio / 2;\n    const pieSize = maxAngle / stepsColors.length;\n    let lastval = 0;\n\n    ctx.clearRect(halfWidth * -1, halfWidth * -1, wRatio, wRatio);\n    ctx.resetTransform();\n\n    ctx.translate(wRatio / 2, wRatio / 2);\n    ctx.rotate(Math.PI * 2 * ((rotation + (360 - maxAngle - lineGap) / 2) / 360));\n\n    for (let i = 0; i < stepsColors.length; i++) {\n      ctx.beginPath();\n      ctx.arc(\n        0,\n        0,\n        halfWidth - lineWidth * pixelRatio / 2,\n        Math.PI * 2 * ((lastval + lineGap) / 360),\n        Math.PI * 2 * ((lastval + pieSize) / 360),\n      );\n      lastval += pieSize;\n      if (scoreNumber < i + 1) ctx.strokeStyle = hex2rgba(stepsColors[i], fadedOpacity);\n      else ctx.strokeStyle = stepsColors[i];\n      ctx.lineWidth = lineWidth * pixelRatio;\n      ctx.stroke();\n    }\n  }\n\n  componentDidMount() {\n    this.devicePixelRatio = window.devicePixelRatio;\n    this.ctx = this.canvas.current.getContext('2d');\n\n    this.draw(this.ctx);\n  }\n\n  render() {\n    const { width } = this.props;\n\n    this.draw(this.ctx);\n\n    return (\n      <canvas\n        className={styles.rangeSvg}\n        ref={this.canvas}\n        style={{ width }}\n        width={width}\n        height={width}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Range from './Range';\n\nimport styles from '../styles.css';\n\nexport default class Score extends React.PureComponent {\n  static propTypes = {\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n    ]).isRequired,\n    maxValue: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    stepsColors: PropTypes.array.isRequired,\n    textStyle: PropTypes.object,\n  };\n\n  static defaultProps = {\n    textStyle: {},\n  };\n\n  getCurrentColor = (num) => {\n    const { stepsColors } = this.props;\n\n    if (num <= 0) return stepsColors[0];\n    if (num > stepsColors.length) return stepsColors[stepsColors.length - 1];\n\n    return stepsColors[num - 1];\n  };\n\n  render() {\n    const {\n      value,\n      maxValue,\n      width,\n      stepsColors,\n      textStyle,\n    } = this.props;\n\n    const stepRange = maxValue / stepsColors.length;\n    const numberHighlight = Math.ceil(value / stepRange);\n\n    const valueSize = (36 * width) / 200;\n    const maxValueSize = (20 * width) / 200;\n    const scoreValuePosition = (25 * width) / 200;\n\n    return (\n      <div className={styles.scoreWrapper}>\n        <Range scoreNumber={Number(numberHighlight)} {...this.props} />\n        <div\n          className={styles.scoreValue}\n          style={{\n            bottom: scoreValuePosition,\n            color: this.getCurrentColor(numberHighlight),\n            ...textStyle,\n          }}\n        >\n          <span className={styles.value} style={{ fontSize: valueSize }}>\n            {value}\n          </span>\n          <span className={styles.separator} style={{ fontSize: maxValueSize }}>\n            /\n          </span>\n          <span className={styles.maxValue} style={{ fontSize: maxValueSize }}>\n            {maxValue}\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// components\nimport Score from './components/Score';\n\nimport styles from './styles.css';\n\nconst DEFAULT_STEP_COLORS = [\n  '#d12000',\n  '#ed8d00',\n  '#f1bc00',\n  '#84c42b',\n  '#53b83a',\n  '#3da940',\n  '#3da940',\n  '#3da940',\n];\n\nexport default function ReactScoreIndicator(props) {\n  const { width, style } = props;\n\n  return (\n    <div className={styles.wrapper} style={{ width: `${width}px`, ...style }}>\n      <Score {...props} />\n    </div>\n  );\n}\n\nReactScoreIndicator.propTypes = {\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]).isRequired,\n  maxValue: PropTypes.number.isRequired,\n  width: PropTypes.number,\n  lineWidth: PropTypes.number,\n  lineSpacing: PropTypes.number,\n  style: PropTypes.object,\n  textStyle: PropTypes.object,\n  maxAngle: PropTypes.number,\n  rotation: PropTypes.number,\n  stepsColors: PropTypes.array,\n  fadedOpacity: PropTypes.number,\n};\n\nReactScoreIndicator.defaultProps = {\n  width: 200,\n  maxAngle: 260,\n  lineWidth: 5,\n  lineSpacing: 5,\n  rotation: 90,\n  stepsColors: DEFAULT_STEP_COLORS,\n  style: {},\n  textStyle: {},\n  fadedOpacity: 40,\n};\n"],"names":["hex2rgba","hex","opacity","newhex","replace","r","parseInt","substring","g","b","result","Score","canvas","React","createRef","ctx","devicePixelRatio","props","width","maxAngle","rotation","stepsColors","lineGap","lineWidth","scoreNumber","fadedOpacity","pixelRatio","wRatio","current","height","halfWidth","pieSize","length","lastval","clearRect","resetTransform","translate","rotate","Math","PI","i","beginPath","arc","strokeStyle","stroke","window","getContext","draw","styles","rangeSvg","Component","propTypes","PropTypes","number","isRequired","array","defaultProps","getCurrentColor","num","value","maxValue","textStyle","stepRange","numberHighlight","ceil","valueSize","maxValueSize","scoreValuePosition","scoreWrapper","Range","Number","scoreValue","fontSize","separator","PureComponent","oneOfType","string","object","DEFAULT_STEP_COLORS","ReactScoreIndicator","style","wrapper"],"mappings":"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"}